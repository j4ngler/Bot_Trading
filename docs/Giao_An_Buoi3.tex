% -*- coding: utf-8 -*-
\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[vietnamese]{babel}
\usepackage{amsmath,amssymb}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{enumitem}

\geometry{margin=2.3cm}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{Bu·ªïi 3 - AI Advisor \& B√°o c√°o}
\fancyhead[R]{Trading Bot - Testnet}
\fancyfoot[C]{\thepage}

\title{\textbf{Gi√°o √Ån Bu·ªïi 3}\\
\large ChatGPT Advisor, Auto-Reporting \& ƒê√°nh Gi√° Hi·ªáu Su·∫•t}
\author{}
\date{}

\begin{document}

\maketitle

\section*{1. M·ª•c ti√™u bu·ªïi h·ªçc}
\begin{itemize}[leftmargin=1.2cm]
    \item Hi·ªÉu c√°ch \texttt{ChatGPTAdvisor} t·∫°o khuy·∫øn ngh·ªã v√† gi·ªõi h·∫°n c·ªßa AI trong giao d·ªãch.
    \item Th·ª±c h√†nh ch·ªânh prompt, ƒë·ªçc log ph·∫£n h·ªìi, ƒëo ``ƒë·ªô tin c·∫≠y'' t·ª´ m√¥ h√¨nh.
    \item K·∫øt n·ªëi chu·ªói: AI Advisor $\rightarrow$ Risk Manager $\rightarrow$ b√°o c√°o \texttt{reporting\_monitoring.py}.
    \item Ho√†n thi·ªán dashboard (tab B√°o C√°o + Chat) v√† xu·∫•t b√°o c√°o \texttt{duong\_cong\_von.png}, \texttt{trading\_report.html}.
\end{itemize}

\section*{2. Chu·∫©n b·ªã}
\begin{itemize}[leftmargin=1.2cm]
    \item M√°y ƒë√£ c√†i \texttt{requirements.txt}, c√≥ t√†i kho·∫£n OpenAI (ho·∫∑c key demo t·ª´ gi√°o vi√™n).
    \item File \texttt{.env} m·∫´u: \texttt{OPENAI\_API\_KEY}, \texttt{BINANCE\_API\_KEY}, \texttt{BINANCE\_SECRET\_KEY}.
    \item Slide t√≥m t·∫Øt ki·∫øn tr√∫c AI Advisor + Reporting (s∆° ƒë·ªì module trong README).
    \item D·ªØ li·ªáu m·∫´u trong \texttt{data/trading\_history.db} ƒë·ªÉ HS t·∫°o b√°o c√°o ngay c·∫£ khi ch∆∞a giao d·ªãch.
\end{itemize}

\section*{3. L·ªô tr√¨nh 90 ph√∫t}

\subsection*{A. Warm-up: ``AI c√≥ sai kh√¥ng?'' (5')}
\textbf{Ho·∫°t ƒë·ªông:} Chi·∫øu 3 log ChatGPT (BUY, SELL, HOLD) v√† h·ªèi: ``N·∫øu AI khuy·∫øn ngh·ªã BUY li√™n t·ª•c th√¨ Risk Manager x·ª≠ l√Ω sao?'' \\
\textbf{Tr·∫£ l·ªùi g·ª£i √Ω:} Risk Manager ch·ªâ cho ph√©p l·ªánh khi c√°c ƒëi·ªÅu ki·ªán v·∫´n ƒë·∫°t: RSI kh√¥ng qu√° 70, ATR/gi√° kh√¥ng v∆∞·ª£t ng∆∞·ª°ng bi·∫øn ƒë·ªông, ƒë·ªô tin c·∫≠y (confidence) $\ge$ ng∆∞·ª°ng y√™u c·∫ßu v√† ch∆∞a v∆∞·ª£t gi·ªõi h·∫°n v·ªã th·∫ø. N·∫øu m·ªôt trong c√°c ƒëi·ªÅu ki·ªán th·∫•t b·∫°i, l·ªánh v·∫´n b·ªã ch·∫∑n d√π AI li√™n t·ª•c BUY. \\
\textbf{M·ª•c ti√™u} gi√∫p HS nh·∫Øc l·∫°i r·∫±ng AI ch·ªâ l√† b·ªô ph√¢n t√≠ch, cu·ªëi c√πng v·∫´n c·∫ßn lu·∫≠t qu·∫£n tr·ªã r·ªßi ro v√† b√°o c√°o ƒë·ªÉ ki·ªÉm tra.

\subsection*{B. ChatGPT Advisor deep-dive (25')}
\textbf{B∆∞·ªõc 1: Gi·∫£i ph·∫´u file \texttt{chatgpt\_advisor.py} (8')} \\
GV h∆∞·ªõng d·∫´n ƒë·ªçc:
\begin{enumerate}[leftmargin=0.8cm]
    \item H√†m \texttt{\_\_init\_\_}: t·∫°o OpenAI client, l·∫•y model t·ª´ \texttt{config.OPENAI\_MODEL}.
    \item H√†m \texttt{analyze\_market}: d·ª±ng prompt t·ª´ \texttt{TRADING\_PROMPT}, g·ª≠i API, parse BUY/SELL/HOLD.
    \item H√†m \texttt{chat\_with\_user}: duy tr√¨ \texttt{history}, gi·ªõi h·∫°n 40 message.
\end{enumerate}

\textbf{B∆∞·ªõc 2: Ch·ªânh prompt v√† th·ª≠ nghi·ªám (10')} \\
\begin{itemize}[leftmargin=0.6cm]
    \item HS m·ªü \texttt{config.py}, thay ƒë·ªïi c√¢u ``Lu√¥n nh·∫Øc nh·ªü v·ªÅ r·ªßi ro'' th√†nh th√¥ng ƒëi·ªáp c·ªßa nh√≥m.
    \item Ch·∫°y \texttt{python run.py} \rightarrow Tab Chat, g·ª≠i c√¢u h·ªèi ``BTC ƒëang xu h∆∞·ªõng g√¨?'' ƒë·ªÉ xem ph·∫£n h·ªìi m·ªõi.
    \item Quan s√°t log trong panel Logs: th·∫£o lu·∫≠n khi n√†o n√™n tin khuy·∫øn ngh·ªã AI.
\end{itemize}

\textbf{B∆∞·ªõc 3: ƒê·ªçc ``confidence'' (7')} \\
\begin{itemize}[leftmargin=0.6cm]
    \item Trong \texttt{run\_once()}, in th√™m d√≤ng \texttt{advice['confidence']} ƒë·ªÉ so s√°nh v·ªõi gi√° tr·ªã Risk Manager y√™u c·∫ßu.
    \item B√†i t·∫≠p: thay ƒëi·ªÅu ki·ªán confidence $\ge 60$ trong \texttt{risk\_manager.py} v√† xem AI c√≤n bao nhi√™u l·ªánh ƒë∆∞·ª£c ph√©p.
\end{itemize}

\subsection*{C. T·ª± ƒë·ªông h√≥a b√°o c√°o (25')}
\textbf{B∆∞·ªõc 1: T·∫°o b√°o c√°o t·ª´ DB (10')} \\
\begin{itemize}[leftmargin=0.6cm]
    \item Ch·∫°y script:
\begin{verbatim}
python -m src.reporting_monitoring
\end{verbatim}
    \item HS ki·ªÉm tra th∆∞ m·ª•c \texttt{data/} c√≥ \texttt{trading\_report.html} v√† \texttt{duong\_cong\_von.png}.
    \item Th·∫£o lu·∫≠n: PnL √¢m/ d∆∞∆°ng th·ªÉ hi·ªán g√¨? Equity curve cho th·∫•y xu h∆∞·ªõng v·ªën ra sao?
\end{itemize}

\textbf{B∆∞·ªõc 2: T√πy bi·∫øn tab B√°o c√°o trong GUI (10')} \\
\begin{itemize}[leftmargin=0.6cm]
    \item M·ªü \texttt{gui\_app.py}, t√¨m h√†m \texttt{refresh\_report()} v√† \texttt{update\_chart()}.
    \item HS s·ª≠a m√†u s·∫Øc/ti√™u ƒë·ªÅ ƒë·ªÉ nh·∫•n m·∫°nh ``üìà ƒê∆∞·ªùng Cong V·ªën''.
    \item B·∫•m ``L√†m m·ªõi b√°o c√°o'' trong GUI ƒë·ªÉ th·∫•y ·∫£nh m·ªõi.
\end{itemize}

\textbf{B∆∞·ªõc 3: B√†i t·∫≠p mini (5')} \\
M·ªói nh√≥m th√™m m·ªôt d√≤ng ch√∫ th√≠ch d∆∞·ªõi bi·ªÉu ƒë·ªì: ``C·∫≠p nh·∫≠t l√∫c HH:MM'' (g·ª£i √Ω d√πng \texttt{datetime.now()} trong \texttt{update\_chart}).

\subsection*{D. Case study: ``AI ƒë∆∞a l·ªánh sai'' (20')}
\begin{enumerate}[leftmargin=0.9cm]
    \item GV cung c·∫•p log gi·∫£: ChatGPT BUY nh∆∞ng gi√° gi·∫£m m·∫°nh.
    \item HS d√πng b√°o c√°o 30 ng√†y ƒë·ªÉ t√¨m PnL l·ªánh ƒë√≥, x√°c ƒë·ªãnh v√¨ sao Risk Manager v·∫´n cho ph√©p (ƒë·ªß ƒëi·ªÅu ki·ªán?).
    \item Nh√≥m ƒë·ªÅ xu·∫•t c√°ch c·∫£i thi·ªán: tƒÉng y√™u c·∫ßu confidence, th√™m ch·ªâ b√°o ph·ª•, ch·ªânh stop-loss trong \texttt{risk\_manager}.
\end{enumerate}
K·∫øt th√∫c b·∫±ng b·∫£ng ``H√†nh ƒë·ªông kh·∫Øc ph·ª•c'':
\begin{itemize}[leftmargin=0.6cm]
    \item \textbf{Tri·ªáu ch·ª©ng}: AI BUY sai.
    \item \textbf{Nguy√™n nh√¢n}: RSI trong v√πng nhi·ªÖu, ATR th·∫•p n√™n Risk Manager OK.
    \item \textbf{Gi·∫£i ph√°p}: th√™m checklist ki·ªÉm tra xu h∆∞·ªõng, xem l·∫°i prompt AI.
\end{itemize}

\subsection*{E. T·ªïng k·∫øt \& checklist Git (5')}
\begin{itemize}[leftmargin=0.6cm]
    \item HS ghi l·∫°i thay ƒë·ªïi ƒë√£ l√†m: prompt AI, ng∆∞·ª°ng confidence, giao di·ªán b√°o c√°o.
    \item Commit t·∫°m v·ªõi th√¥ng ƒëi·ªáp \texttt{"lesson-3: ai advisor \& reporting"}.
    \item Nh·∫Øc nh·ªü: lu√¥n ·∫©n API key khi share repo.
\end{itemize}

\section*{4. B√†i t·∫≠p v·ªÅ nh√†}
\begin{itemize}[leftmargin=1.2cm]
    \item Vi·∫øt ƒëo·∫°n script trong \texttt{scripts/} t·ª± ƒë·ªông g·ª≠i email b√°o c√°o HTML m·ªói 24h (g·ª£i √Ω d√πng \texttt{smtplib} ho·∫∑c ch·ªâ c·∫ßn l∆∞u file).
    \item Thi·∫øt k·∫ø th√™m m·ªôt c√¢u h·ªèi ``what-if'' ƒë·ªÉ ChatGPT tr·∫£ l·ªùi (v√≠ d·ª•: ``N·∫øu RSI > 80 th√¨ b·∫°n khuy√™n g√¨?''), chu·∫©n b·ªã demo cho bu·ªïi 4.
\end{itemize}

\section*{5. Ghi ch√∫ cho gi√°o vi√™n}
\begin{itemize}[leftmargin=1.2cm]
    \item Chu·∫©n b·ªã s·∫µn key OpenAI d·ª± ph√≤ng v√¨ h·ªçc sinh d·ªÖ g·∫∑p l·ªói quota.
    \item N·∫øu h·∫° t·∫ßng m·∫°ng y·∫øu, cho ph√©p HS d√πng log text thay v√¨ GUI.
    \item Nh·∫Øc HS ghi ch√©p c√°c prompt ƒë√£ th·ª≠ ƒë·ªÉ so s√°nh hi·ªáu qu·∫£ ·ªü bu·ªïi sau (h∆∞·ªõng t·ªõi ``prompt engineering'').
\end{itemize}

\vspace{0.5cm}
\begin{center}
\textbf{K·∫øt th√∫c bu·ªïi 3:}\\
\textit{H·ªçc sinh hi·ªÉu v√† c√≥ th·ªÉ tinh ch·ªânh ChatGPT Advisor, theo d√µi b√°o c√°o t·ª± ƒë·ªông, v√† ƒë√°nh gi√° hi·ªáu su·∫•t giao d·ªãch d·ª±a tr√™n d·ªØ li·ªáu th·ª±c nghi·ªám.}
\end{center}

\end{document}

